<!DOCTYPE html>
<html lang="la">

<head>
    <meta charset="utf-8">
    <title>Focandi Focati!</title>
    <meta name="description" content="Pagina focandi indicati">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <header>
        <nav aria-label="Primarium">
            <ul>
                <li><a href="index.html" aria-current="page">Domus</a></li>
                <li><a href="#">Secunda Pagina</a></li>
                <li><a href="#">Alia Pagina</a></li>
                <li><a href="#">Contactim est</a></li>
            </ul>
        </nav>
        <h1>Lorem focandi focandi est</h1>
    </header>
    <main>
        <section>
            <h2>Triggerum Modalis</h2>
            <button id="openModal">Open Modal</button>
        </section>

        <section>
            <h2>Stylium CSSium</h2>
            <p>
                <a href="#">Classnamus duplicatus</a>, specificity bellum aeternum.
                Variabilis perditus, themarum togglus fallit in safarium.
            </p>
            <h3>Flexboxus et Gridium</h3>
            <p>
                Alignare centratus? <a href="#">Miraculum rarum</a>. Gridium colapsus in IE-um veterum.
                "margin: auto" orare, sed layoutus in chaos.
            </p>
        </section>
    </main>
    <footer>
        <p><small>Â© Focandi focati and such!</small></p>
        <nav aria-label="Leggatum">
            <ul>
                <li><a href="#">Contactim est</a></li>
                <li><a href="#">Mappa situm</a></li>
                <li><a href="#">Pressam</a></li>
            </ul>
        </nav>
        <nav aria-label="Socialis instrumentis communicationis">
            <ul>
                <li>
                    <a href="#">
                        <img src="images/li.png" alt="Annunciare in LinkedIn" />
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="images/in.png" alt="Annunciare in Instagram" />
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="images/fb.png" alt="Annunciare in Facebook" />
                    </a>
                </li>
            </ul>
        </nav>
        <p>
            <small>Imagines in pagina benigne praebitae ab
                <a href="https://www.pexels.com/@catscoming/" target="_blank">CatsComing on Pexels</a>
            </small>
        </p>
    </footer>

    <!-- Modal -->
    <div id="modalOverlay" class="hidden">
        <div id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <h2 id="modalTitle">Accessible Modal</h2>
            <input type="text" placeholder="Type here">
            <button>Save</button>
            <button id="closeModal">Close</button>
        </div>
    </div>
</body>

</html>


<script>
   const openBtn = document.getElementById("openModal");
    const modalOverlay = document.getElementById("modalOverlay");
    const modal = document.getElementById("modal");
    const closeBtn = document.getElementById("closeModal");
    const pageContent = document.getElementById("pageContent");

    let lastFocusedElement;

    // Open modal
    openBtn.addEventListener("click", () => {
        lastFocusedElement = document.activeElement; // remember trigger
        modalOverlay.classList.remove("hidden");
        pageContent.setAttribute("aria-hidden", "true"); // hide background from AT
        modal.querySelector("input").focus();
    });

    // Close modal
    function closeModal() {
        modalOverlay.classList.add("hidden");
        pageContent.removeAttribute("aria-hidden");
        lastFocusedElement.focus(); // restore focus
    }

    closeBtn.addEventListener("click", closeModal);

    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !modalOverlay.classList.contains("hidden")) {
            closeModal();
        }
    });

    // Focus trap
    modal.addEventListener("keydown", (e) => {
        if (e.key === "Tab") {
            const focusable = modal.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const first = focusable[0];
            const last = focusable[focusable.length - 1];

            if (e.shiftKey && document.activeElement === first) {
                e.preventDefault();
                last.focus();
            } else if (!e.shiftKey && document.activeElement === last) {
                e.preventDefault();
                first.focus();
            }
        }
    });

</script>